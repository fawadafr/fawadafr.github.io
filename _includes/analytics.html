<!-- Google Analytics 4 -->
<!-- TODO: Replace GA_MEASUREMENT_ID with your actual GA4 Measurement ID (G-XXXXXXXXXX) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=GA_MEASUREMENT_ID"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  // Page view tracking
  gtag('config', 'GA_MEASUREMENT_ID', {
    'page_title': document.title,
    'page_location': window.location.href,
    'page_path': window.location.pathname
  });

  // Event tracking for key actions
  function trackEvent(eventName, eventParams) {
    gtag('event', eventName, eventParams);
  }

  // Track speaking page views
  if (window.location.pathname.includes('/speaking')) {
    trackEvent('page_view', {
      'page_type': 'speaking',
      'event_category': 'engagement',
      'event_label': 'speaking_page_view'
    });
  }

  // Track contact link clicks
  document.addEventListener('DOMContentLoaded', function() {
    // Email clicks
    const emailLinks = document.querySelectorAll('a[href^="mailto:"]');
    emailLinks.forEach(link => {
      link.addEventListener('click', function() {
        trackEvent('contact_click', {
          'event_category': 'engagement',
          'event_label': 'email_click',
          'link_url': this.href
        });
      });
    });

    // LinkedIn clicks
    const linkedinLinks = document.querySelectorAll('a[href*="linkedin.com"]');
    linkedinLinks.forEach(link => {
      link.addEventListener('click', function() {
        trackEvent('social_click', {
          'event_category': 'engagement',
          'event_label': 'linkedin_click',
          'link_url': this.href
        });
      });
    });

    // External link clicks
    const externalLinks = document.querySelectorAll('a[href^="http"]:not([href*="lab.fawad.ai"])');
    externalLinks.forEach(link => {
      link.addEventListener('click', function() {
        trackEvent('outbound_link', {
          'event_category': 'engagement',
          'event_label': 'external_link_click',
          'link_url': this.href
        });
      });
    });

    // Related post clicks (Sprint 5-6: Engagement tracking)
    const relatedPostLinks = document.querySelectorAll('a[data-event="related-post-click"]');
    relatedPostLinks.forEach(link => {
      link.addEventListener('click', function() {
        trackEvent('related_post_click', {
          'event_category': 'content_discovery',
          'event_label': 'related_posts',
          'source_post': document.title,
          'target_post': this.getAttribute('data-post-title'),
          'link_url': this.href
        });
      });
    });
  });
</script>
